language: objective-c

matrix:
  include:
  - {osx_image: xcode10.2, env: SCHEME="MLFairy iOS" SDK="iphonesimulator" DESTINATION="OS=12.2,name=iPhone Xs"}
  - {osx_image: xcode10.2, env: SCHEME="MLFairy macOS" SDK="macosx" DESTINATION="arch=x86_64"}

cache:
  directories:
  - MLFairy/Carthage

before_install:
  - brew update
  - brew install carthage
  - gem install xcpretty

script:
  - cd MLFairy
  - carthage update --cache-builds --new-resolver --configuration Debug
  - xcodebuild test -scheme $SCHEME -project 'MLFairy.xcodeproj' -sdk $SDK -destination "$DESTINATION"
